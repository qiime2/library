{
  "Commit Runs": {
    "status": 200,
    "url": "https://api.github.com/repos/PlanesLab/q2-metnet/commits/12d5ef881914f8118d6714847c37da11a6e0a494/check-runs?owner=PlanesLab&repo=q2-metnet&head_sha=12d5ef881914f8118d6714847c37da11a6e0a494",
    "headers": {
      "access-control-allow-origin": "*",
      "access-control-expose-headers": "ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset",
      "cache-control": "private, max-age=60, s-maxage=60",
      "content-encoding": "gzip",
      "content-security-policy": "default-src 'none'",
      "content-type": "application/json; charset=utf-8",
      "date": "Mon, 03 Feb 2025 17:06:06 GMT",
      "etag": "W/\"617f475d9ddb31f77e96b1159e4d576264824f8a1e6829965ab2c126118ca6eb\"",
      "referrer-policy": "origin-when-cross-origin, strict-origin-when-cross-origin",
      "server": "github.com",
      "strict-transport-security": "max-age=31536000; includeSubdomains; preload",
      "transfer-encoding": "chunked",
      "vary": "Accept, Authorization, Cookie, X-GitHub-OTP,Accept-Encoding, Accept, X-Requested-With",
      "x-accepted-github-permissions": "checks=read",
      "x-content-type-options": "nosniff",
      "x-frame-options": "deny",
      "x-github-api-version-selected": "2022-11-28",
      "x-github-media-type": "github.v3; format=json",
      "x-github-request-id": "9380:E77CD:2F2250:5DF759:67A0F77E",
      "x-ratelimit-limit": "5000",
      "x-ratelimit-remaining": "4969",
      "x-ratelimit-reset": "1738605951",
      "x-ratelimit-resource": "core",
      "x-ratelimit-used": "31",
      "x-xss-protection": "0"
    },
    "data": { "total_count": 0, "check_runs": [] }
  },
  "Readme": "# q2-metnet\n\nQIIME 2 plugin to contextualize taxonomic abundance data into high-quality metabolic reconstruction of the human gut microbiota.\nRead more about the method in our [paper](https://academic.oup.com/bioinformatics/article/40/11/btae455/7715876).\n\n# Installing\n\n## Creating a conda environment with QIIME2 and q2-metnet\n\n```\nconda env create \\\n -n q2-metnet \\\n -f https://raw.githubusercontent.com/PlanesLab/q2-metnet.git/main/environment-files/q2-metnet-qiime2-amplicon-2024.10.yml\n```\n\n## Using an existing QIIME2 environment\n\nOnce you create your QIIME2 environment, you can install this plugin by cloning this repo and installing manually. To clone the repo:\n\n```\ngit clone https://github.com/PlanesLab/q2-metnet.git\n```\n\nTo install from this repo, check to be into the main directory (running the `ls` command the setup.py file must be displayed), and run:\n\n```\npython setup.py install\n```\n\nThen, update the plugin cache by typing:\n\n```\nqiime dev refresh-cache\n```\n\nYou can check that the installation worked by typing `qiime` on the command line.\nThe `metnet` plugin should show up in the list of available plugins.\n\n# Using the plugin\n\nThere are available four methods in this plugin: \n- `generateFeatures`, which creates the tables of normalized scores for any reaction and subsystem present in the selected metabolic reconstruction across the different samples under study;\n- `differentialReactions`, which computes a differential activity analysis about any kind of reaction for the different conditions under analysis;\n- `differentialExchanges`, which computes a differential activity analysis about exchange reactions for the different conditions under analysis;\n- `differentialSubSystems`, which computes a differential activity analysis about subsystems for the different conditions under analysis;\n- `plotClusteMap`, which permits to visualize different samples by a hierarchically-clustered heatmap;\n- `plotPCA`, which allows to visualize different samples by conducting a Principal Component Analysis;\n- `plotBoxplot`, which generates boxplot of both reaction or subsystem scores to visualize differences between conditions.\n\n## Preparing your data\n\nYou'll need to prepare your ASV (OTU) table, respective taxonomical assignation and metadata file for use with this plugin.\nYour ASV(OTU) table should be imported as a [QIIME 2 artifact](https://docs.qiime2.org/2019.1/concepts/#data-files-qiime-2-artifacts), with **ASVs (OTUs) in rows** and **samples in columns**.\nSimilarly, the taxonomical assignation should be imported as [QIIME 2 artifact](https://docs.qiime2.org/2019.1/concepts/#data-files-qiime-2-artifacts).\n\nMetadata should be a tab-delimited file with a column that contains samples labeled depending on the type of samples they are (for example: `case` and `control`).\nThis column need to be defined to permit the plugin to compute the differential activity analysis.\n\nIf your OTU table is already a QIIME 2 artifact, you can skip directly to running the code.\nOtherwise, follow the instructions on the QIIME 2 webpage to use your own tab-delimited OTU table.\n\n## Generate the normalized scores tables\n\nYou then run the `generateFeatures` script from the `metnet` qiime plugin. The `AGREDA` and `s` parameter of `--p-selection` and `--p-level` are the default parameters.\nThe parameter `--p-selection` can be chosen between `AGREDA` (default) and `AGORAv103`.\nThe parameter `--p-level` correspond to the taxonomic depth, ranging from kingdom (`k`) to species (`s`, default).\n\n```\nqiime metnet generateFeatures \\\n\t--i-frequency ../asv_table.asv.qza \\\n\t--i-taxa ../assigned_taxonomy.qza \\\n\t--p-selection AGREDA \\\n\t--p-level s \\\n\t--o-reactions ../output_reactions.qza \\\n\t--o-subsystems ../output_subsystems.qza \\\n\t--o-xmatrix ./output_X_matrix.qza\n```\n\n## Calculate differential analysis scores for exchange reactions\n\nYou then run the `differentialExchanges` script from the `metnet` qiime plugin.\nThe parameter `--p-condition-name` represents the category of the samples related to the condition state in the metadata column.\nThe parameter `--p-control-name` represents the category of the samples related to the control state in the metadata column.\nThe parameter `--p-selection-model` corresponds to the same metabolic reconstruction used in the table generation (`AGREDA` (default), `AGORAv103`).\nThe parameter `--p-input-interest` defines if the focus is just on those exchange that can be input (and may be output as well) or just output (default = True).\n\n```\nqiime metnet differentialExchanges \\\n\t--i-reactions ../output_reactions.qza \\\n\t--m-metadata-file ../metadata.tsv \\\n\t--m-metadata-column columnLabel \\\n\t--p-condition-name conditionLabel \\\n\t--p-control-name controlLabel \\\n\t--p-selection-model AGREDA \\\n\t--p-input-interest True \\\n\t--o-differential-analysis ../exchanges_differential.qza\n```\n\n## Calculate differential analysis scores for any kind of reactions\n\nYou then run the `differentialReactions` script from the `metnet` qiime plugin.\nThe parameter `--p-condition-name` represents the category of the samples related to the condition state in the metadata column.\nThe parameter `--p-control-name` represents the category of the samples related to the control state in the metadata column.\nThe parameter `--p-selection-model` corresponde to the same metabolic reconstruction used in the table generation (`AGREDA` (default), `AGORAv103`).\n\n```\nqiime metnet differentialReactions \\\n\t--i-reactions ../output_reactions.qza \\\n\t--m-metadata-file ../metadata.tsv \\\n\t--m-metadata-column columnLabel \\\n\t--p-condition-name conditionLabel \\\n\t--p-control-name controlLabel \\\n\t--p-selection-model AGREDA \\\n\t--o-differential-analysis ../reactions_differential.qza\n```\n\n## Calculate differential analysis scores for subsystems\n\nYou then run the `differentialSubSystems` script from the `metnet` qiime plugin.\nThe parameter `--p-condition-name` represents the category of the samples related to the condition state in the metadata column.\nThe parameter `--p-control-name` represents the category of the samples related to the control state in the metadata column.\n\n```\nqiime metnet differentialSubSystems \\\n\t--i-subsystems ../output_subsystems.qza \t\n\t--m-metadata-file ../metadata.tsv \t\n\t--m-metadata-column columnLabel\\\n\t--p-condition-name conditionLabel \\\n\t--p-control-name controlLabel \\\n\t--o-differential-analysis ../subsystems_differential.qza\n```\n\n## Generate the hierarchically-clustered heatmap\n\nYou then run the `plotClusteMap` script from the `metnet` qiime plugin.\nThe `--i-table` can be the normalized scores table for reactions or subsystems.\nThe input `--m-sample-metadata-file` and the specification of the `--m-sample-metadata-column` define the label groups.\nIt is possible to introduce parameters such as metrics, methods, color_scheme, title etc, not present below.\n\n```\nqiime metnet plotClusteMap \n\t--i-table ../output_reactions.qza \\\n\t--m-sample-metadata-file ../metadata.tsv \\\n\t--m-sample-metadata-column columnLabel \\\n\t--o-visualization ../clustermap.qzv\n```\n\n## Compute and visualize the Principal Component Analysis\n\nYou then run the `plotPCA` script from the `metnet` qiime plugin.\nThe `--i-table` can be the normalized scores table for reactions or subsystems.\nThe input `--m-sample-metadata-file` and the specification of the `--m-sample-metadata-column` define the label groups.\nIt is possible to introduce parameters such as color_scheme, title and individual point label (boolean, default = False) not present below.\n```\nqiime metnet plotPCA \\\n\t--i-table ../output_reactions.qza \\\n\t--m-sample-metadata-file ../metadata.tsv \\\n\t--m-sample-metadata-column columnLabel \\\n\t--o-visualization ../pca.qzv\n```\n\n## Generate the boxplots\n\nYou then run the `plotBoxplot` script from the `metnet` qiime plugin.\nThe `--i-table` can be the normalized scores table for reactions or subsystems.\nThe `--i-differentialresults` represents the differential activity analysis corresponding to exchanges, reactions or subsystems.\nThe input `--m-sample-metadata-file` and the specification of the `--m-sample-metadata-column` define the label groups.\nThe parameter `--p-condition-name` represents the category of the samples related to the condition state in the metadata column.\nThe parameter `--p-control-name` represents the category of the samples related to the control state in the metadata column.\nThe parameter `--p-namefeature` represents the name of the exchange, reaction or subsystem for which we generate the boxplot. The name must be extracted exactly from the differential activity table.\nIt is possible to define a title.\n\n```\nqiime metnet plotBoxplot \\\n\t--i-table ../output_reactions.qza \\\n\t--i-differentialresults ../exchanges_differential.qza \\\n\t--m-sample-metadata-file ../metadata.tsv \\\n\t--m-sample-metadata-column columnLabel \\\n\t--p-condition-name conditionLabel \\\n\t--p-control-name controlLabel \\\n\t--p-namefeature 'nameExchange' \\\n\t--o-visualization ../boxplot.qzv\n```\n\n## Test files and application\n\nThe **test** folder contains all the input data sources to replicate the manuscript results. To run the following tutorial, we will need the following files:\n+ **asv_table.qza:** feature table with microbial abundances, where rows correspond to each sequence and columns to the different samples. The column **ID** stores the identificators of each sequence (*e.g.* ASV_1).\n+ **taxa.qza:** contains the taxonomic lineage of each sequence. The column **ID** stores the identificators of each sequence, which are written in the same order as in the feature table rows.\n+ **meta.tsv:** file including sample phenotype data. The rows correspond to each sample and are written in the same order as the feature table columns.\n\nIn order to use your own data, please refer to [QIIME2 documentation](https://docs.qiime2.org/2023.7/semantic-types/#common-semantic-types) to check allowed column headers. In any case, you can use the same columnn headers as in this tutorial files. Once QIIME2 and q2-metnet have been successfully installed, the first step is to generate the reactions and subsystem normalized activity scores of our data. This step may take a couple of minutes to be performed.\n\n```\nqiime metnet generateFeatures \\\n\t--i-frequency ./test/asv_table.qza \\\n\t--i-taxa ./test/taxa.qza \\\n\t--p-selection AGREDA \\\n\t--p-level s \\\n\t--o-reactions ./rxns_scores.qza \\\n\t--o-subsystems ./subs_scores.qza \\\n\t--o-xmatrix ./Xmatrix.qza\n```\n\nBy the selection of parameters `--p-selection` and `--p-level` we decided to map our different taxonomies to the AGREDA database, until the species level. At this point, the normalized activity scores can be applied to perform a PCA and classify samples. As shown in the **meta.tsv** file, the different clinical conditions are stored in the **Condition** column. Then, we can generate a PCA of our samples and all the reactions scores by the following command. Below is displayed the correspondent figure. Remember that any **qzv** file can be displayed at [QIIME2 View](https://view.qiime2.org/).\n\n```\nqiime metnet plotPCA \\\n\t--i-table ./rxns_scores.qza \\\n\t--m-sample-metadata-file ./test/meta.tsv \\\n\t--m-sample-metadata-column Condition \\\n\t--o-visualization ./rxns_pca.qzv\n```\n\n<img src=\"https://raw.githubusercontent.com/PlanesLab/q2-metnet/refs/heads/main/Figure/pca.png\">\n\nAdditionally, a hierarchically-clustered heatmap can be generated by running the `plotClusteMap`function. In the following example, we are going to generate the heatmap of the reaction scores across samples. Following, the generated figure is shown.\n\n```\nqiime metnet plotClusteMap \\\n\t--i-table ./rxns_scores.qza \\\n\t--m-sample-metadata-file ./test/meta.tsv \\\n\t--m-sample-metadata-column Condition \\\n\t--o-visualization ./rxns_hclust.qzv\n```\n\n<img src=\"https://raw.githubusercontent.com/PlanesLab/q2-metnet/refs/heads/main/Figure/clustermap.png\">\n\nWe are able to show that the normalized activity scores for some of these reactions are altered through the different clinical conditions of our dataset. We are now going to investigate deeper these differences. The different clinical conditions of our data are **Allergic**, **Celiac**, **Lean** and **Obese**, where **Lean** can be considered as the control state. In this example, we are now going to check the differentially expressed reactions and subsystems between **Celiac** and **Lean** samples.\n\n```\nqiime metnet differentialReactions \\\n\t--i-reactions ./rxns_scores.qza \\\n\t--m-metadata-file ./test/meta.tsv \\\n\t--m-metadata-column Condition \\\n\t--p-condition-name Celiac \\\n\t--p-control-name Lean \\\n\t--p-selection-model AGREDA \\\n\t--o-differential-analysis ./diff_reactions.qza\n```\n```\nqiime metnet differentialSubSystems \\\n\t--i-subsystems ./subs_scores.qza \\\n\t--m-metadata-file ./test/meta.tsv \\\n\t--m-metadata-column Condition \\\n\t--p-condition-name Celiac \\\n\t--p-control-name Lean \\\n\t--o-differential-analysis ./diff_subs.qza\n```\n```\nqiime metnet differentialExchanges \\\n\t--i-reactions ./rxns_scores.qza \\\n \t--m-metadata-file ./test/meta.tsv \\\n  \t--m-metadata-column Condition \\\n   \t--p-condition-name Celiac \\\n    \t--p-control-name Lean \\\n       \t--o-differential-analysis ./diff_ex.qza\n```\n\nFinally, the differential activity score of a given feature (reaction or subsystem) can be displayed by means of the `plotBoxplot`function. In the following example, we are going to generate the boxplot of the **Bile acid metabolism** subsytem across samples of the **Celiac** and **Lean** condition.\n```\nqiime metnet plotBoxplot \\\n\t--i-table ./subs_scores.qza \\\n\t--i-differentialresults ./diff_subs.qza \\\n\t--m-sample-metadata-file ./test/meta.tsv \\\n\t--m-sample-metadata-column Condition \\\n\t--p-condition-name Celiac \\\n\t--p-control-name Lean \\\n\t--p-namefeature \"S144 | Bile acid metabolism\" \\\n\t--o-visualization ./sub_boxplot.qzv\n```\n<img src=\"https://raw.githubusercontent.com/PlanesLab/q2-metnet/refs/heads/main/Figure/boxplot.PNG\">\n\nRemember that you can run the following command and visualize the output file [here](https://view.qiime2.org/) to select the different values for '--p-name-feature'.\n```\nqiime metadata tabulate \\\n    --m-input-file ./diff_subs.qza \\\n    --o-visualization ./diff_subs.qzv\n```",
  "Plugin Owner": "PlanesLab",
  "Plugin Name": "q2-metnet",
  "Branch": "main",
  "User Docs": "https://github.com/PlanesLab/q2-metnet/tree/main",
  "Build Status": "passed",
  "Commit Date": "2025-02-03T14:07:22Z",
  "Stars": 2,
  "Description": "QIIME 2 plugin to contextualize taxonomic abundance data into high-quality metabolic reconstruction of the human gut microbiota",
  "Releases": ["amplicon-2024.10"]
}
