{
  "readme": {
    "type": "root",
    "children": [
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "This is a QIIME 2 plugin. For details on QIIME 2, see https://qiime2.org. For details on sourmash, see http://sourmash.readthedocs.io/.",
            "key": "YwYzortn4e"
          }
        ],
        "key": "gNNs8UkzKc"
      },
      {
        "type": "heading",
        "depth": 2,
        "children": [
          {
            "type": "text",
            "value": "Installing the QIIME 2 sourmash plugin",
            "key": "LiqXhsdTwj"
          }
        ],
        "key": "ZWsoaYDvgH",
        "identifier": "installing-the-qiime-2-sourmash-plugin",
        "label": "Installing the QIIME 2 sourmash plugin",
        "html_id": "installing-the-qiime-2-sourmash-plugin",
        "implicit": true
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "q2-sourmash is a QIIME 2 plugin for sourmash, a tool computing and comparing MinHash signatures for nucleotide sequences fast and effieciently. You can find out more about sourmash by reading the paper ",
            "key": "c3TBaA5WAD"
          },
          {
            "type": "link",
            "url": "http://joss.theoj.org/papers/10.21105/joss.00027",
            "children": [
              {
                "type": "text",
                "value": "(Brown and Irber, JOSS 2018)",
                "key": "IrIIGA8eyi"
              }
            ],
            "key": "K3Ck6fF5gv"
          },
          {
            "type": "text",
            "value": " or checking out the ",
            "key": "D2FwITo481"
          },
          {
            "type": "link",
            "url": "https://sourmash.readthedocs.io/en/latest/",
            "children": [
              {
                "type": "text",
                "value": "sourmash documentation",
                "key": "E2YxdaWiiU"
              }
            ],
            "key": "cPLnHLmSDb"
          },
          {
            "type": "text",
            "value": ".",
            "key": "Ogo2N9zH97"
          }
        ],
        "key": "ohCBRbhdmN"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "You need to have QIIME 2 version 2018.4 or later. Also, regardless of which way you install, you need to be in a QIIME 2 environment for this to work. ",
            "key": "VvUza90Tv0"
          },
          {
            "type": "link",
            "url": "https://docs.qiime2.org/2018.8/install/",
            "children": [
              {
                "type": "text",
                "value": "Install QIIME 2",
                "key": "DtWtMAQzCA"
              }
            ],
            "key": "o1WJOb214x"
          },
          {
            "type": "text",
            "value": " and activate the QIIME 2 virtual environment (e.g. ",
            "key": "PPxATgU7n3"
          },
          {
            "type": "inlineCode",
            "value": "source activate qiime2-2018.8",
            "key": "lMD1e1f8in"
          },
          {
            "type": "text",
            "value": "), and then install sourmash by running:",
            "key": "Fjk6uuQBKV"
          }
        ],
        "key": "KBMekwlx2u"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "inlineCode",
            "value": "conda install -c bioconda sourmash",
            "key": "C8zfCwxJd2"
          }
        ],
        "key": "jG3jg3m0gY"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "You will also need to install q2-types-genomics (unless your environment already has it):",
            "key": "hTacvXYqRU"
          }
        ],
        "key": "zjHF9IdU14"
      },
      {
        "type": "code",
        "lang": "",
        "value": "conda install -c conda-forge -c bioconda -c https://packages.qiime2.org/qiime2/2023.5/tested -c defaults \\\n    q2-types-genomics",
        "key": "rul0lScZgb"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "To install the plugin, run the following command:",
            "key": "f546o5lkuV"
          }
        ],
        "key": "Y5sLHuqKXX"
      },
      {
        "type": "code",
        "lang": "",
        "value": "pip install https://github.com/dib-lab/q2-sourmash/archive/master.zip",
        "key": "YCyDrzN00b"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "To check that the installation worked, type ",
            "key": "T3n1M3cLcd"
          },
          {
            "type": "inlineCode",
            "value": "qiime",
            "key": "R5BL1wdvoe"
          },
          {
            "type": "text",
            "value": " on the command line. The sourmash plugin should show up in the list of available plugins.",
            "key": "uV8XcYDiTY"
          }
        ],
        "key": "mfQaUYrXTP"
      },
      {
        "type": "heading",
        "depth": 2,
        "children": [
          {
            "type": "text",
            "value": "Using the QIIME2 sourmash plugin",
            "key": "jKquO8KzM4"
          }
        ],
        "key": "Jdt5iFk4Pw",
        "identifier": "using-the-qiime2-sourmash-plugin",
        "label": "Using the QIIME2 sourmash plugin",
        "html_id": "using-the-qiime2-sourmash-plugin",
        "implicit": true
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "Currently there are two main methods for use in the QIIME 2 sourmash plugin: ",
            "key": "zTFIP1zvUR"
          },
          {
            "type": "inlineCode",
            "value": "compute",
            "key": "Ns31Z7UKl2"
          },
          {
            "type": "text",
            "value": " to calcualte MinHash signatures from nucleotide sequences and ",
            "key": "aOYjForenG"
          },
          {
            "type": "inlineCode",
            "value": "compare",
            "key": "R1JNAebZgi"
          },
          {
            "type": "text",
            "value": " to calculate a Jaccard distance between samples.",
            "key": "vst6GfPtIO"
          }
        ],
        "key": "ArkArWTQnr"
      },
      {
        "type": "heading",
        "depth": 3,
        "children": [
          {
            "type": "text",
            "value": "Computing signatures",
            "key": "zSan1Wt4B9"
          }
        ],
        "key": "T7w8nOQw6W",
        "identifier": "computing-signatures",
        "label": "Computing signatures",
        "html_id": "computing-signatures",
        "implicit": true
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "The ",
            "key": "s09vkmygIy"
          },
          {
            "type": "inlineCode",
            "value": "compute",
            "key": "BR2MfpABsI"
          },
          {
            "type": "text",
            "value": " calcuates the minhash signatures for a given set of nucleotide sequences. To run, one must simply supply a ",
            "key": "ro6Y1T8Qwj"
          },
          {
            "type": "inlineCode",
            "value": ".qza",
            "key": "t3K1we3wGv"
          },
          {
            "type": "text",
            "value": " archive (directory) containing sequence file ending with ‘fastq.gz’.",
            "key": "FTKHnEGo5e"
          }
        ],
        "key": "OFvIUCrnaE"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "First download a test set of fastq.gz files already in the form of a qza archive and the associated metadata. Here we are using data from the ",
            "key": "c8SI5RCHlO"
          },
          {
            "type": "link",
            "url": "https://docs.qiime2.org/2018.8/tutorials/moving-pictures/",
            "children": [
              {
                "type": "text",
                "value": "Moving Pictures tutorial",
                "key": "pFp8v0jjQb"
              }
            ],
            "key": "TwoiWtqmtJ"
          },
          {
            "type": "text",
            "value": ":",
            "key": "hTTRkpmFHO"
          }
        ],
        "key": "WYgzGJfODw"
      },
      {
        "type": "code",
        "lang": "",
        "value": "wget -c -nc https://docs.qiime2.org/2018.4/data/tutorials/moving-pictures/demux.qza\nwget -c -nc https://data.qiime2.org/2018.8/tutorials/moving-pictures/sample_metadata.tsv ",
        "key": "aKe2mNKvm6"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "To calculate sourmash signatures for all sequence files within the archive use the following:",
            "key": "pbd2QHyiso"
          }
        ],
        "key": "H813C8kOtf"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "inlineCode",
            "value": "qiime sourmash compute --i-sequence-file demux.qza --p-ksizes 21 --p-scaled 10000 --o-min-hash-signature sigs.qza",
            "key": "LDTWzPuHDV"
          }
        ],
        "key": "HfrADBqBL4"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "The following flags are required:",
            "key": "ELhQwum7b4"
          }
        ],
        "key": "WOfl0xzqnM"
      },
      {
        "type": "list",
        "ordered": false,
        "spread": false,
        "children": [
          {
            "type": "listItem",
            "spread": true,
            "children": [
              {
                "type": "inlineCode",
                "value": "--i-sequence-file",
                "key": "heUTF6qLSj"
              },
              {
                "type": "text",
                "value": " : the path to the qza directory",
                "key": "OyCZTvWIRP"
              }
            ],
            "key": "uHmoL4rUFY"
          },
          {
            "type": "listItem",
            "spread": true,
            "children": [
              {
                "type": "inlineCode",
                "value": "--p-ksizes",
                "key": "lGOd9wmjyd"
              },
              {
                "type": "text",
                "value": " : the k-size of the hash (integer)",
                "key": "LzydlsyPcF"
              }
            ],
            "key": "jBBaSkc1ln"
          },
          {
            "type": "listItem",
            "spread": true,
            "children": [
              {
                "type": "inlineCode",
                "value": "--p-scaled",
                "key": "xeMv0iZ4HU"
              },
              {
                "type": "text",
                "value": " : the scaled value (integer)",
                "key": "QoPmifVknd"
              }
            ],
            "key": "OnSn81Rkrt"
          },
          {
            "type": "listItem",
            "spread": true,
            "children": [
              {
                "type": "inlineCode",
                "value": "--o-min-hash-signature",
                "key": "mEbro57HoP"
              },
              {
                "type": "text",
                "value": " : the output qza file name",
                "key": "vZUMYporcf"
              }
            ],
            "key": "kdXeA9oEUI"
          }
        ],
        "key": "PDfQbwt01k"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "The output archive, in this case ",
            "key": "hRzV06KLCv"
          },
          {
            "type": "inlineCode",
            "value": "sigs.qza",
            "key": "JbVPLMikpZ"
          },
          {
            "type": "text",
            "value": ", contains the signature files for each of the fastq.gz files that were input. They can be viewed using the ",
            "key": "l9f58uS0lL"
          },
          {
            "type": "link",
            "url": "https://view.qiime2.org/",
            "children": [
              {
                "type": "text",
                "value": "qiime online viewer",
                "key": "SDIpsXIUP3"
              }
            ],
            "key": "sj780KhyOr"
          },
          {
            "type": "text",
            "value": " or by unzipping the qza file.",
            "key": "Ehy7vuv6bl"
          }
        ],
        "key": "UehxsNjZdc"
      },
      {
        "type": "code",
        "lang": "",
        "value": "qiime tools export --input-path sigs.qza --output-path sigs",
        "key": "L5wg0UmBzY"
      },
      {
        "type": "heading",
        "depth": 3,
        "children": [
          {
            "type": "text",
            "value": "Comparing signatures",
            "key": "Y4pu7W0EWg"
          }
        ],
        "key": "FLeIeihx9z",
        "identifier": "comparing-signatures",
        "label": "Comparing signatures",
        "html_id": "comparing-signatures",
        "implicit": true
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "Signatures that have been calculated as above can then be compared using ",
            "key": "R2a4IPphZu"
          },
          {
            "type": "inlineCode",
            "value": "sourmash compare",
            "key": "vgKcLnGqIz"
          },
          {
            "type": "text",
            "value": ". This will calculate a pair-wise Jaccard distance between each of the samples included in the provided qza archive:",
            "key": "FaaeMikB6b"
          }
        ],
        "key": "a85tJ8oVGt"
      },
      {
        "type": "code",
        "lang": "",
        "value": "qiime sourmash compare --i-min-hash-signature sigs.qza --p-ksize 21 --o-compare-output compare.mat.qza",
        "key": "pdec3fTYj7"
      },
      {
        "type": "paragraph",
        "children": [
          {
            "type": "text",
            "value": "The output, ",
            "key": "ejdn3chbS4"
          },
          {
            "type": "inlineCode",
            "value": "compare.mat.qza",
            "key": "YTZ3um4oA8"
          },
          {
            "type": "text",
            "value": ", can then be investigated as above by unzipping the qza archive or can be pushed through subsequent analyses (e.g. generate a PCoA plot):",
            "key": "MR24vKHQCb"
          }
        ],
        "key": "vF1ocq62yr"
      },
      {
        "type": "code",
        "lang": "",
        "value": "qiime diversity pcoa --i-distance-matrix compare.mat.qza  --o-pcoa pcoa.compare.mat.qza\nqiime emperor plot --i-pcoa pcoa.compare.mat.qza --o-visualization emperor.qzv --m-metadata-file sample_metadata.tsv",
        "key": "qKFICbTDZh"
      }
    ],
    "key": "mFsFDH3o09"
  },
  "releases": [],
  "owner": "dib-lab",
  "name": "q2-sourmash",
  "docs": "https://bokulich-lab.github.io/moshpit-docs/",
  "in_distro": true,
  "distros": ["metagenome-2024.10"],
  "stars": 6,
  "description": "Qiime2 Sourmash Plugin",
  "branch": "main",
  "last_commit": {
    "sha": "ed0fedc3162fa4256c5eeef11e84f908a6274b2c",
    "status": "passed",
    "date": "2024-12-23T19:20:49Z"
  }
}
